"use strict";(self.webpackChunktemporary_access=self.webpackChunktemporary_access||[]).push([[67],{"./assets/js/components/UsersTable/index.stories.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),WithRegistrySetup=__webpack_require__("./tests/js/WithRegistrySetup.js"),test_utils=__webpack_require__("./tests/js/utils/test-utils.js"),constants=__webpack_require__("./assets/js/datastores/constants.js");const users_namespaceObject=JSON.parse('{"users":[{"ID":1,"first_name":"User1","last_name":"Last1","user_email":"user1@test.com","user_login":"user_1723440001","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e001","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e001","expired":false,"last_login":"Never"},{"ID":2,"first_name":"User2","last_name":"Last2","user_email":"user2@test.com","user_login":"user_1723440002","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e002","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e002","expired":false,"last_login":"Never"},{"ID":3,"first_name":"User3","last_name":"Last3","user_email":"user3@test.com","user_login":"user_1723440003","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e003","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e003","expired":false,"last_login":"Never"},{"ID":4,"first_name":"User4","last_name":"Last4","user_email":"user4@test.com","user_login":"user_1723440004","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e004","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e004","expired":false,"last_login":"Never"},{"ID":5,"first_name":"User5","last_name":"Last5","user_email":"user5@test.com","user_login":"user_1723440005","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e005","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e005","expired":false,"last_login":"Never"},{"ID":6,"first_name":"User6","last_name":"Last6","user_email":"user6@test.com","user_login":"user_1723440006","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e006","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e006","expired":false,"last_login":"Never"},{"ID":7,"first_name":"User7","last_name":"Last7","user_email":"user7@test.com","user_login":"user_1723440007","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e007","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e007","expired":false,"last_login":"Never"},{"ID":8,"first_name":"User8","last_name":"Last8","user_email":"user8@test.com","user_login":"user_1723440008","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e008","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e008","expired":false,"last_login":"Never"},{"ID":9,"first_name":"User9","last_name":"Last9","user_email":"user9@test.com","user_login":"user_1723440009","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e009","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e009","expired":false,"last_login":"Never"},{"ID":10,"first_name":"User10","last_name":"Last10","user_email":"user10@test.com","user_login":"user_1723440010","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e010","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e010","expired":false,"last_login":"Never"},{"ID":11,"first_name":"User11","last_name":"Last11","user_email":"user11@test.com","user_login":"user_1723440011","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e011","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e011","expired":false,"last_login":"Never"},{"ID":12,"first_name":"User12","last_name":"Last12","user_email":"user12@test.com","user_login":"user_1723440012","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e012","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e012","expired":false,"last_login":"Never"},{"ID":13,"first_name":"User13","last_name":"Last13","user_email":"user13@test.com","user_login":"user_1723440013","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e013","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e013","expired":false,"last_login":"Never"},{"ID":14,"first_name":"User14","last_name":"Last14","user_email":"user14@test.com","user_login":"user_1723440014","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e014","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e014","expired":false,"last_login":"Never"},{"ID":15,"first_name":"User15","last_name":"Last15","user_email":"user15@test.com","user_login":"user_1723440015","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e015","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e015","expired":false,"last_login":"Never"},{"ID":16,"first_name":"User16","last_name":"Last16","user_email":"user16@test.com","user_login":"user_1723440016","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e016","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e016","expired":false,"last_login":"Never"},{"ID":17,"first_name":"User17","last_name":"Last17","user_email":"user17@test.com","user_login":"user_1723440017","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e017","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e017","expired":false,"last_login":"Never"},{"ID":18,"first_name":"User18","last_name":"Last18","user_email":"user18@test.com","user_login":"user_1723440018","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e018","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e018","expired":false,"last_login":"Never"},{"ID":19,"first_name":"User19","last_name":"Last19","user_email":"user19@test.com","user_login":"user_1723440019","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e019","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e019","expired":false,"last_login":"Never"},{"ID":20,"first_name":"User20","last_name":"Last20","user_email":"user20@test.com","user_login":"user_1723440020","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e020","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e020","expired":false,"last_login":"Never"},{"ID":21,"first_name":"User21","last_name":"Last21","user_email":"user21@test.com","user_login":"user_1723440021","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e021","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e021","expired":false,"last_login":"Never"},{"ID":22,"first_name":"User22","last_name":"Last22","user_email":"user22@test.com","user_login":"user_1723440022","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e022","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e022","expired":false,"last_login":"Never"},{"ID":23,"first_name":"User23","last_name":"Last23","user_email":"user23@test.com","user_login":"user_1723440023","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e023","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e023","expired":false,"last_login":"Never"},{"ID":24,"first_name":"User24","last_name":"Last24","user_email":"user24@test.com","user_login":"user_1723440024","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e024","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e024","expired":false,"last_login":"Never"},{"ID":25,"first_name":"User25","last_name":"Last25","user_email":"user25@test.com","user_login":"user_1723440025","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e025","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e025","expired":false,"last_login":"Never"},{"ID":26,"first_name":"User26","last_name":"Last26","user_email":"user26@test.com","user_login":"user_1723440026","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e026","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e026","expired":false,"last_login":"Never"},{"ID":27,"first_name":"User27","last_name":"Last27","user_email":"user27@test.com","user_login":"user_1723440027","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e027","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e027","expired":false,"last_login":"Never"},{"ID":28,"first_name":"User28","last_name":"Last28","user_email":"user28@test.com","user_login":"user_1723440028","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e028","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e028","expired":false,"last_login":"Never"},{"ID":29,"first_name":"User29","last_name":"Last29","user_email":"user29@test.com","user_login":"user_1723440029","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e029","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e029","expired":false,"last_login":"Never"},{"ID":30,"first_name":"User30","last_name":"Last30","user_email":"user30@test.com","user_login":"user_1723440030","start_date":"2024-08-01T10:53:29","end_date":"2024-09-05T10:53:34","redirect":null,"role":"editor","token":"bfeb963074b5defde3cc1ccdaee6e030","expiration":"1725533614","_login_url":"https://tempuser.local/wp-login.php?tempaccess_token=bfeb963074b5defde3cc1ccdaee6e030","expired":false,"last_login":"Never"}],"total":30}');var DataGrid=__webpack_require__("./node_modules/@mui/x-data-grid/DataGrid/DataGrid.js"),use_dispatch=__webpack_require__("./node_modules/@wordpress/data/build-module/components/use-dispatch/use-dispatch.js"),use_select=__webpack_require__("./node_modules/@wordpress/data/build-module/components/use-select/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),LinearProgress=__webpack_require__("./node_modules/@mui/material/LinearProgress/LinearProgress.js"),browser=__webpack_require__("./node_modules/invariant/browser.js"),browser_default=__webpack_require__.n(browser),dist_module=__webpack_require__("./node_modules/@react-hook/window-size/dist/module/index.js");const BREAKPOINT_XLARGE="xlarge",BREAKPOINT_DESKTOP="desktop",BREAKPOINT_TABLET="tablet",BREAKPOINT_SMALL="small";function ProgressBar({className,small,compress,indeterminate,height,smallHeight,tabletHeight,desktopHeight,progress}){const breakpoint=function useBreakpoint(){const onlyWidth=(0,dist_module.SO)();return onlyWidth>1280?BREAKPOINT_XLARGE:onlyWidth>960?BREAKPOINT_DESKTOP:onlyWidth>600?BREAKPOINT_TABLET:BREAKPOINT_SMALL}();let margin,progressBarHeight=height;BREAKPOINT_SMALL===breakpoint&&void 0!==smallHeight?progressBarHeight=smallHeight:BREAKPOINT_TABLET===breakpoint&&void 0!==tabletHeight?progressBarHeight=tabletHeight:BREAKPOINT_XLARGE!==breakpoint&&BREAKPOINT_DESKTOP!==breakpoint||void 0===desktopHeight||(progressBarHeight=desktopHeight),void 0!==progressBarHeight&&(browser_default()(progressBarHeight>=4,"height must be >= 4."),margin=Math.round((progressBarHeight-4)/2));const transform=progress?`scaleX(${progress})`:void 0;return(0,jsx_runtime.jsx)("div",{role:"progressbar",style:{marginTop:margin,marginBottom:margin},className:classnames_default()("tempaccess-linear-progress",className,{"tempaccess-indeterminate":indeterminate,"tempaccess-progress--small":small,"tempaccess-progress--compress":compress}),children:(0,jsx_runtime.jsx)("div",{className:"tempaccess-progress__bar tempaccess-progress__primary-bar",style:{transform},children:(0,jsx_runtime.jsx)(LinearProgress.A,{})})})}var build_module=__webpack_require__("./node_modules/@wordpress/i18n/build-module/index.js"),Badge=__webpack_require__("./node_modules/@mui/material/Badge/Badge.js");function UserBadge({user}){const expired=user.expired;let badgeColor="error",badgeContent=(0,build_module.__)("Expired","passwordless-temporary-login");return expired||(badgeColor="success",badgeContent=(0,build_module.__)("Active","passwordless-temporary-login")),(0,jsx_runtime.jsx)(Badge.A,{color:badgeColor,badgeContent})}var build_module_button=__webpack_require__("./node_modules/@wordpress/components/build-module/button/index.js");function RowActions({user}){const{setContext,setUser,setUserForDeletion}=(0,use_dispatch.A)(constants.r),{setNotice}=(0,use_dispatch.A)(constants.E);return(0,jsx_runtime.jsxs)("div",{className:"tempuser-actions",children:[(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:"edit",title:(0,build_module.__)("Edit","passwordless-temporary-login"),isPressed:!1,onClick:()=>{setContext("edit"),setUser(user)}}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:"trash",title:(0,build_module.__)("Delete","passwordless-temporary-login"),isPressed:!1,onClick:()=>{setContext("delete"),setUserForDeletion(user)}}),(0,jsx_runtime.jsx)(build_module_button.Ay,{icon:"admin-links",title:(0,build_module.__)("Copy link","passwordless-temporary-login"),isPressed:!1,onClick:()=>(async userData=>{const{_login_url}=userData;await navigator.clipboard.writeText(_login_url),setNotice({code:"link-copied",noticeType:"success",message:(0,build_module.__)("Link copied to clipboard","passwordless-temporary-login")})})(user)})]})}const commonProps={align:"center",headerAlign:"center"},DataColumns=[{field:"name",headerName:(0,build_module.__)("Name","passwordless-temporary-login"),width:300},{field:"username",headerName:(0,build_module.__)("Username","passwordless-temporary-login"),width:200},{field:"email",headerName:(0,build_module.__)("Email","passwordless-temporary-login"),width:250},{field:"last_access",headerName:(0,build_module.__)("Last access","passwordless-temporary-login"),width:250},{field:"status",headerName:(0,build_module.__)("Status","passwordless-temporary-login"),renderCell:({row})=>(0,jsx_runtime.jsx)(UserBadge,{user:row}),width:120},{field:"actions",headerName:(0,build_module.__)("Actions","passwordless-temporary-login"),renderCell:({row})=>(0,jsx_runtime.jsx)(RowActions,{user:row}),width:200}].map((column=>({...column,...commonProps})));function getDataRows(users){return users.map((user=>({...user,id:user.ID,name:`${user.first_name} ${user.last_name}`.trim(),username:user.user_login,email:user.user_email,last_access:user.last_login,key:user.ID})))}function UsersTable(){const{setPageModal}=(0,use_dispatch.A)(constants.r),paginationModel=(0,use_select.A)((select=>select(constants.r).getPageModal())),users=(0,use_select.A)((select=>select(constants.E).getUsers(paginationModel)),[paginationModel]),totalUsers=(0,use_select.A)((select=>select(constants.E).getTotalUsers()),[]);if(!(0,use_select.A)((select=>select(constants.E).hasFinishedResolution("getUsers",[paginationModel])),[paginationModel]))return(0,jsx_runtime.jsx)(ProgressBar,{height:200,indeterminate:!0});if(!Array.isArray(users)||0===users.length)return null;return(0,jsx_runtime.jsx)(DataGrid.z,{autoHeight:!0,columns:DataColumns,disableRowSelectionOnClick:!0,disableColumnSorting:!0,disableColumnFilter:!0,disableColumnMenu:!0,headerAlign:"center",paginationMode:"server",paginationModel,pageSizeOptions:[5,10,20,50],sx:{"&.MuiDataGrid-root .MuiDataGrid-cell:focus-within":{outline:"none"}},onPaginationModelChange:newPaginationModel=>{setPageModal(newPaginationModel)},rows:getDataRows(users),rowCount:totalUsers})}const Default=function Template({setupRegistry}){return(0,jsx_runtime.jsx)(WithRegistrySetup.A,{func:setupRegistry,children:(0,jsx_runtime.jsx)(UsersTable,{})})}.bind({});Default.storyName="UsersTable",Default.args={setupRegistry:registry=>{const pageNum=Array.from({length:5},((_,i)=>i+1));[5,10,20,50].flatMap((d=>pageNum.map((v=>({page:v,perPage:d}))))).forEach((c=>{registry.dispatch(constants.E).receiveGetUsers({...users_namespaceObject,users:users_namespaceObject.users.slice(c.page*c.perPage-c.perPage,c.page*c.perPage)},{page:c.page-1,pageSize:c.perPage})}))}};const index_stories={title:"Components/UsersTable",decorators:[Story=>{const registry=(0,test_utils.Cj)();return(0,jsx_runtime.jsx)(test_utils.MG,{registry,children:(0,jsx_runtime.jsx)(Story,{})})}]},__namedExportsOrder=["Default"]}}]);